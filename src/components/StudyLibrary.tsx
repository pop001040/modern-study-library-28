import { StudyBook } from './StudyBook';
import { motion } from 'framer-motion';
import { ClassicCounter } from './ClassicCounter';
import { useState } from 'react';

const studies = [
  // المشاريع الزراعية الحيوانية
  "مشروع مزرعة تربية الأبقار لإنتاج الحليب",
  "مشروع تسمين العجول لإنتاج اللحوم",
  "مزرعة تربية الأغنام والماعز لإنتاج اللحوم والصوف",
  "مزرعة الدواجن لإنتاج البيض",
  "مشروع تربية الدواجن لإنتاج اللحوم",
  "مزرعة تربية الأرانب لإنتاج اللحوم والفراء",
  "مزرعة تربية النعام لإنتاج اللحوم والجلود",
  "مزرعة تربية الأسماك",
  "مزرعة تربية النحل لإنتاج العسل",
  "مزرعة تربية الخيول وإنتاج الأمهار",
  "مزرعة تربية الإبل لإنتاج الحليب واللحوم",
  "مشروع إنتاج الألبان ومشتقاتها",
  "مزرعة تربية البط لإنتاج اللحوم والبيض",
  "مزرعة تربية الحمام لإنتاج اللحوم",
  "مزرعة تربية الأوز لإنتاج اللحوم والبيض",
  "مشروع تربية الأسماك في الأحواض العائمة",
  "مزرعة تربية الغزلان لإنتاج اللحوم والجلود",
  "مزرعة تربية طيور السمان لإنتاج اللحوم والبيض",
  "مشروع إنتاج الفطر من مخلفات الحيوانات",
  "مزرعة تربية الحيوانات الصغيرة للبحث العلمي",

  // المشاريع الصناعية
  "مصنع تعبئة وتغليف المنتجات الغذائية",
  "مصنع إنتاج الصابون والمنظفات",
  "مصنع إنتاج الأثاث المنزلي والمكتبي",
  "ورشة تصنيع الأدوات المعدنية والبلاستيكية",
  "مصنع إنتاج المخللات والمربى",
  "مصنع إنتاج العطور ومستحضرات التجميل",
  "مصنع إنتاج الشموع والزيوت العطرية",
  "مصنع إنتاج الملابس الجاهزة",
  "مصنع إعادة تدوير البلاستيك",
  "ورشة تصنيع المجوهرات والإكسسوارات",
  "مصنع إنتاج الطوب والبلاط",
  "مصنع إنتاج المعكرونة والمنتجات الغذائية المجففة",
  "مصنع إنتاج الحلويات والشوكولاتة",
  "مصنع إنتاج الأكياس الورقية والبلاستيكية",
  "مصنع إنتاج الورق والكرتون",
  "مصنع إنتاج المنتجات الصديقة للبيئة",
  "ورشة تصنيع الأبواب والنوافذ",
  "مصنع إنتاج الأدوات المنزلية الكهربائية البسيطة",
  "مصنع إنتاج الألعاب التعليمية والألعاب الخشبية",
  "مصنع إنتاج الأدوات الطبية البسيطة",

  // المشاريع الخدمية
  "مكتب خدمات الترجمة",
  "مركز تقديم خدمات الحاسوب والإنترنت",
  "شركة تنظيف المنازل والمكاتب",
  "خدمة تأجير الأدوات والمعدات",
  "مكتب خدمات التسويق الرقمي والإعلانات",
  "شركة تنظيم الفعاليات والحفلات",
  "مكتب خدمات التصوير والفيديو",
  "مركز تقديم خدمات الطباعة والتصميم",
  "مركز صيانة الأجهزة الإلكترونية",
  "مكتب استشارات الأعمال والمشروعات",
  "شركة توصيل الطلبات للمنازل",
  "مركز تدريب وتطوير المهارات",
  "مركز رعاية الأطفال",
  "مكتب تقديم خدمات المحاسبة والضرائب",
  "مركز تقديم خدمات الرعاية الصحية المنزلية",
  "مركز العناية بالحيوانات الأليفة",
  "مكتب خدمات النقل والشحن",
  "شركة إدارة الممتلكات والعقارات",
  "مركز تجميل وصالون للعناية بالشعر",
  "مكتب تقديم خدمات السياحة والسفر",

  // المشاريع الزراعية النباتية
  "مزرعة زراعة الطماطم",
  "مزرعة زراعة الخيار",
  "مزرعة زراعة الفراولة",
  "مزرعة زراعة البطيخ",
  "مزرعة زراعة الكوسا",
  "مزرعة زراعة الفلفل الحلو والحار",
  "مزرعة زراعة الباذنجان",
  "مزرعة زراعة الجزر",
  "مزرعة زراعة البطاطا",
  "مزرعة زراعة البصل والثوم",
  "مزرعة زراعة السبانخ والخس",
  "مزرعة زراعة التفاح",
  "مزرعة زراعة العنب",
  "مزرعة زراعة البرتقال والحمضيات",
  "مزرعة زراعة الموز",
  "مزرعة زراعة المانجو",
  "مزرعة زراعة الأفوكادو",
  "مزرعة زراعة البقدونس والكزبرة",
  "مزرعة زراعة النعناع والريحان",
  "مزرعة زراعة الألوة فيرا",

  // المشاريع الإلكترونية
  "متجر إلكتروني لبيع الملابس",
  "خدمة الاستشارات عبر الإنترنت",
  "تدريب وتطوير المهارات عبر الإنترنت",
  "متجر إلكتروني للمنتجات اليدوية",
  "خدمة التسويق الرقمي والإعلانات",
  "موقع للدروس الخصوصية عبر الإنترنت",
  "متجر إلكتروني للأدوات المنزلية",
  "خدمة التصميم الجرافيكي عبر الإنترنت",
  "خدمة كتابة المحتوى والتحرير",
  "موقع لخدمات الترجمة",
  "خدمة إدارة وسائل التواصل الاجتماعي",
  "خدمة تنظيم الأحداث عبر الإنترنت",
  "متجر إلكتروني للأجهزة الإلكترونية",
  "موقع لخدمات الطباعة والتصميم",
  "خدمة الاستشارات المالية والمحاسبية",
  "خدمة تطوير التطبيقات والمواقع",
  "منصة للتعليم الإلكتروني",
  "خدمة التصوير الفوتوغرافي والفيديو",
  "موقع لخدمات الصحة والعافية عن بعد",
  "خدمة الدعم الفني والصيانة"
].map((title, index) => ({
  id: index + 1,
  title,
  description: `وصف تفصيلي لدراسة ${title}`,
  capital: Math.floor(Math.random() * 900000) + 100000,
  expectedProfit: Math.floor(Math.random() * 400000) + 100000,
  price: 150,
  type: { name: 'دراسة جدوى' }
}));

interface StudyLibraryProps {
  onSelectStudy: (study: typeof studies[0]) => void;
}

export const StudyLibrary = ({ onSelectStudy }: StudyLibraryProps) => {
  const [selectedStudies, setSelectedStudies] = useState<Array<{ id: number; price: number }>>([]);

  const handleSelectStudy = (study: typeof studies[0]) => {
    setSelectedStudies(prev => [...prev, { id: study.id, price: study.price }]);
    onSelectStudy(study);
  };

  const totalAmount = selectedStudies.reduce((sum, study) => sum + study.price, 0);

  return (
    <motion.div 
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      className="relative min-h-[800px] perspective"
    >
      <div className="mb-8">
        <ClassicCounter 
          soldStudies={selectedStudies.length} 
          totalAmount={totalAmount}
        />
      </div>

      {/* خلفية المكتبة */}
      <div className="absolute inset-0 bg-white rounded-xl shadow-2xl overflow-hidden">
        {/* نمط خشبي */}
        <div className="absolute inset-0 opacity-10" 
          style={{
            backgroundImage: `url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23000000' fill-opacity='0.4' fill-rule='evenodd'%3E%3Cpath d='M0 40L40 0H20L0 20M40 40V20L20 40'/%3E%3C/g%3E%3C/svg%3E")`
          }}
        />
        
        {/* رفوف المكتبة */}
        <div className="absolute inset-0 grid grid-rows-5 gap-8 p-8">
          {[...Array(5)].map((_, i) => (
            <div key={i} className="relative">
              <div className="absolute bottom-0 left-0 right-0 h-12 bg-gray-100 transform skew-x-12 -skew-y-3 shadow-2xl opacity-50" />
              <div className="absolute bottom-0 left-0 right-0 h-8 bg-gradient-to-b from-gray-50 to-gray-200 transform -skew-x-12 shadow-xl" />
              <div className="absolute bottom-8 left-0 right-0 h-2 bg-gray-300 transform -skew-x-12" />
            </div>
          ))}
        </div>
      </div>
      
      {/* الكتب */}
      <div className="relative grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 gap-4 p-8 max-h-[800px] overflow-y-auto">
        {studies.map((study) => (
          <StudyBook
            key={study.id}
            title={study.title}
            description={study.description}
            capital={study.capital}
            expectedProfit={study.expectedProfit}
            price={study.price}
            onSelect={() => handleSelectStudy(study)}
          />
        ))}
      </div>
    </motion.div>
  );
};
